<%= render 'shared/nav' %>
<div class="hero bg-base-200">
  <div class="hero-content flex-col gap-10 p-10">
    <%= link_to raw('<svg
    xmlns="http://www.w3.org/2000/svg"
    class="h-6 w-6"
    fill="none"
    viewBox="0 0 24 24"
    stroke="currentColor">
  <path
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-width="2"
    d="M12 4v16m-8-8h16" />
  </svg>'), new_user_shift_path(current_user), class: 'btn btn-circle link link-hover text-600 bg-blue-600', role: 'button', escape: false %>
    <% if @shifts.present? %>
      <div class="bg-base-300 rounded-b-box rounded-se-box relative overflow-x-auto" id="outer_index_div" >
        <div class="preview border-base-300 bg-base-100 rounded-b-box rounded-se-box flex min-h-[6rem] min-w-[18rem] max-w-8xl flex-wrap items-center justify-center gap-2 overflow-x-hidden bg-cover bg-top p-4 [border-width:var(--tab-border)]">
          <div class="flex flex-col">
            <div class="overflow-x-auto">
              <table class="table">
                <thead>
                  <tr>
                    <th><label><input type="checkbox" class="checkbox hidden" disabled></label></th>
                    <th>Shift id</th>
                    <th>Shift number</th>
                    <th>Shift user</th>
                    <th>Job type</th>
                    <th>Status</th>
                    <th>Notes</th>
                    <th>Updated At</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <% @shifts.each_with_index do |shift, index| %>
                    <tr>
                      <th>
                        <input type="checkbox" 
                        class="checkbox hidden" 
                        id="checkbox-<%= index %>"
                        disabled>
                      </th>
                      <th>
                        <div class="text-sm opacity-70"><%= shift.id %></div>
                      </th>
                      <th>
                        <div class="text-sm opacity-70"><%= shift.shift_number %></div>
                      </th>
                      <td>
                        <div class="flex items-center gap-3">
                          <div class="avatar">
                            <div class="w-12 h-12 mask mask-squircle">
                              <% if shift.user.profile.avatar.attached? %>
                                <% user_avatar=shift.user.profile.avatar %>
                                <a href="<%= rails_blob_path(user_avatar, disposition: "attachment") %>" class="venobox" data-title="user avatar (<%= user_avatar.filename.to_s%>)" data-gall="gal-<%= index %>">
                                  <%= image_tag user_avatar.variant(:thumb) %>
                                </a>
                              <% end %>
                            </div>
                          </div>
                        </div>
                        <div class="text-sm opacity-100"><%= shift.user.profile.full_name %></div>
                      </td>
                      <td>
                        <%= render "shifts/job_type_badge", shift: shift %>
                      </td>
                      <td>
                        <%= render "shifts/status_badge", shift: shift %>
                      </td>
                      <td>
                        <div class="text-sm opacity-100"><%= shift.notes %></div>
                      </td>
                      <td>
                        <div class="text-sm opacity-50"><%= shift.updated_at %></div>
                      </td>
                      <th>
                        <%= link_to "Shift Details", user_shift_path(shift.user, shift), class: "btn btn-sm btn-primary" %>
                        <%= link_to "Timesheet", shift_briquettes_path(shift, shift.briquettes), class: "btn btn-sm btn-secondary" %>
                      </th>
                    </tr>
                  <% end %>
                </tbody>
                <tfoot>
                  <tr>
                    <th></th>
                    <th>Shift id</th>
                    <th>Shift number</th>
                    <th>Shift user</th>
                    <th>Job type</th>
                    <th>Status</th>
                    <th>Notes</th>
                    <th>Updated At</th>
                    <th></th>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="pagy-nav flex my-5 mb-5 justify-center center-content">
        <%== pagy_nav(@pagy) if @pagy.pages > 1 %>
      </div>
    </div>
  <% else %>
    <%= render "shifts/no_shifts" %>
  <% end %>
</div>
