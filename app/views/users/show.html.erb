<%= render 'shared/nav' %>
<div class="hero bg-base-200">
  <div class="flex-col gap-x-5 gap-y-10 p-10">
    <div class="card bg-base-100 shadow-xl w-96 p-5" id="user_details_<%= @user.id %>">
      <div class="card bg-base-150 flex-row ga justify-center">
        <div class="p-5 flex flex-col">
          <% if @user.avatar.attached? %>
            <% input_file = @user.avatar %>
            <% if input_file.representable? %>
              <div class="grid grid-flow-row justify-center">
                <h4><%= @user.first_name%> <%= @user.last_name %></h4>
                <a href="<%= rails_blob_path(input_file, disposition: "attachment") %>" class="venobox" data-title="<%= @user.first_name%> <%= @user.last_name %>" data-gall="gal-1">
                  <%= image_tag input_file.representation(resize_to_limit: [200, 200]) %>
                </a>
              </div>
            <% else %>
              <h4><%= @user.first_name%> <%= @user.last_name %></h4>
              <div class="justify-end">
                <p>No avatar attached.</p>
              </div>
            <% end %>
          <% end %>
          <%= form_with(model: @user, local: true, class: "flex flex-col p-4") do |form| %>
            <div>
              <div class="flex flex-col pt-5">
                <%= form.label :status, "status", class: "block text-sm font-medium text-gray-700" %>
                <%= form.select :status, 
                   options_for_select([['active', 'active'], 
                                       ['inactive', 'inactive']], 
                                      'status'), 
                   { selected: 'status', disabled: true, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm" } %>
              </div>
              <div class="flex flex-col pt-5">
                <%= form.label :status, "role", class: "block text-sm font-medium text-gray-700" %>
                <%= form.select :status, 
                   options_for_select([['admin', 'admin'], 
                                       ['employee', 'employee']], 
                                      'role'), 
                   { selected: 'role', disabled: true, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm" } %>
              </div>
              <div class="flex flex-col pt-5">
                <%= form.label :notes, "notes", class: "block text-sm font-medium text-gray-700" %>
                <%= form.text_area :notes, value: "Enter your notes here...", class:  "mt-1 block w-full border border-gray-300 rounded-md shadow-sm", readonly: true %>
              </div>
            </div>
            <div class="actions flex pt-5">
              <%= form.submit "Update", class: "btn btn-primary", disabled: true %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <div class="flex gap-4 mt-4 justify-center">
      <%= link_to 'Back', users_path, class:  'bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500' %>
      <% if current_user.admin? %>
        <%= button_to "Delete", user_path(@user), method: :delete, data: { turbo_confirm: "Are you sure?" }, class: 'bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500' %>
      <% end%>
    </div>
  </div>
</div>
